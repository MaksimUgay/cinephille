import{h as A,j as y,r as $,b as S,o as c,c as d,e as p,u as v,i as b,f as o,t as r,z as V,A as z,F as k,k as w,s as B,a as g,l as M,m as C,d as D,w as R,B as T,C as F,D as L}from"./index-58ace600.js";const U={class:"intro"},j={alt:"",class:"intro__img"},N={class:"intro__box"},Y={class:"intro__box-left"},O={class:"intro__box-left-title"},E={class:"intro__box-left-text"},q={class:"intro__box-left-descr"},G=["src"],H={class:"intro__box-right"},J={alt:"",class:"intro__box-right-img"},K={class:"intro__box-right-rating"},P={class:"intro__box-actors"},Q=o("h2",{class:"intro__box-actors-title"},"В главных ролях",-1),W={__name:"Intro",props:{item:Object,type:String,videoItem:Array},setup(t){const e=t;let s=A(!1);const l=()=>{setTimeout(()=>{s.value=!s.value},500)},_=A();console.log(_);const i=()=>{_.value.classList.contains("videoModal")&&(s.value=!1)},n=y(()=>{let a=e.type=="movie"?e.item.release_date:e.type=="tv"?e.item.first_air_date:"";return new Date(a).getFullYear()}),f=y(()=>e.item.genres.reduce((a,m)=>a+", "+m.name,"")),x=y(()=>{let a=e.type=="movie"?e.item.runtime:e.type=="tv"?e.item.episode_run_time[0]:"",m=Math.floor(a/60),u=a%60;return m==0?`${u}m`:`${m}h ${u}m`});return(a,m)=>{const u=$("Actors"),I=S("lazy");return c(),d("section",U,[p(o("img",j,null,512),[[I,v(b)+t.item.backdrop_path]]),o("div",N,[o("div",Y,[o("h1",O,r(t.item.title||t.item.name),1),o("p",E,r(t.item.overview),1),o("p",q,[o("span",null,r(n.value)+r(f.value),1),o("span",null,r(x.value),1)]),t.videoItem?(c(),d("div",{key:0,class:V(["intro__box-left-video",{videoModal:v(s)}]),ref_key:"videoBox",ref:_,onClick:m[1]||(m[1]=h=>i())},[p(o("button",{class:"intro__box-left-video-videoBtn",onClick:m[0]||(m[0]=h=>l())},r(t.videoItem.length>0?"Смотреть трейлер":"Трейлеров нету"),513),[[z,!v(s)]]),v(s)?(c(!0),d(k,{key:0},w(t.videoItem,h=>(c(),d("iframe",{key:h.id,class:"intro__box-left-video-trailer",width:"460",height:"315",src:`https://www.youtube.com/embed/${h.key}`,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,G))),128)):B("",!0)],2)):B("",!0)]),o("div",H,[p(o("img",J,null,512),[[I,v(b)+t.item.poster_path]]),o("p",K,r(parseFloat(t.item.vote_average.toFixed(1)))+"/10",1)]),o("div",P,[Q,g(u,{type:t.type,id:t.item.id,count:6},null,8,["type","id"])])])])}}},X=M("rec",{state:()=>({recMovies:null,recTvs:null}),actions:{async getRec({type:t,id:e}){try{let s=await C.get(`${t}/${e}/recommendations?language=ru-RU`);t=="movie"?this.recMovies=s.data.results:t=="tv"&&(this.recTvs=s.data.results)}catch(s){console.log("Ошибка при получении рекомендаций"+s.message)}}}}),Z=M("video",{state:()=>({movie:null,tv:null}),actions:{async getVideo({type:t,id:e}){try{let s=await C.get(`${t}/${e}/videos?language=ru-RU`);t=="movie"?(this.movie=s.data.results,console.log(s.data)):t=="tv"&&(this.tv=s.data.results)}catch(s){console.log("Ошибка при получении данных по id"+s.message)}}}}),ee={class:"info"},te={class:"container"},se={class:"info__box"},oe={class:"info__box-item-name"},ie={class:"info__box-item-value"},ne={__name:"Info",props:{item:Object},setup(t){const e=t,s=[{name:"Бюджет",text:e.item.budget?"$"+e.item.budget:"Неизвестно"},{name:"Сборы",text:e.item.revenue?"$"+e.item.revenue:"Неизвестно"},{name:"Статус",text:e.item.status},{name:"Исходное название",text:e.item.original_title||e.item.original_name}];return(l,_)=>(c(),d("section",ee,[o("div",te,[o("div",se,[(c(),d(k,null,w(s,i=>o("div",{class:"info__box-item",key:i.name},[o("span",oe,r(i.name),1),o("span",ie,r(i.text),1)])),64))])])]))}},ae={class:"rec"},re={class:"container"},ce={class:"rec__title"},le={class:"rec__list"},_e={alt:"",class:"rec__list-item-img"},me={class:"rec__list-item-title"},de={__name:"Rec",props:{recArray:Array,type:String},setup(t){return(e,s)=>{var i;const l=$("router-link"),_=S("lazy");return c(),d("section",ae,[o("div",re,[o("div",ce,r(((i=t.recArray)==null?void 0:i.length)>0?"Рекомендации":"Рекомендаций нет"),1),o("div",le,[(c(!0),d(k,null,w(t.recArray,n=>(c(),D(l,{to:`${n.id}`,class:"rec__list-item",key:n.id},{default:R(()=>[p(o("img",_e,null,512),[[_,v(b)+n.backdrop_path]]),o("h2",me,r(n.title||n.name),1)]),_:2},1032,["to"]))),128))])])])}}},ue={key:0,class:"main__dynamic"},ye={__name:"Dynamic",props:{type:String},setup(t){const e=t,s=T(),l=F(),_=X(),i=Z();i.getVideo({type:e.type,id:s.params.id}),_.getRec({type:e.type,id:s.params.id}),l.getItemId({type:e.type,id:s.params.id});const n=y(()=>e.type=="movie"?l.movie:e.type=="tv"?l.tv:""),f=y(()=>e.type=="movie"?i.movie:e.type=="tv"?i.tv:""),x=y(()=>{let a=e.type=="movie"?_.recMovies:e.type=="tv"?_.recTVs:"";if(a)return a.slice(0,4)});return L(()=>{l.movie=l.tv=null}),(a,m)=>{const u=$("Loader");return n.value?(c(),d("main",ue,[g(W,{type:t.type,item:n.value,videoItem:f.value},null,8,["type","item","videoItem"]),g(ne,{item:n.value},null,8,["item"]),g(de,{recArray:x.value,type:t.type},null,8,["recArray","type"])])):(c(),D(u,{key:1}))}}};export{ye as _};
